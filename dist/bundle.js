(()=>{"use strict";const e={filled:"filled","not-filled":"not-filled",selected:"selected"};class t{constructor(t,i,l,s,c){this.price=t,this.state=i,this.parent=l,this.addSelectedPlace=s,this.removeSelectedPlace=c,this.id=Math.random().toString(16).slice(2),this.placeElement=document.createElement("div"),this.init=()=>{return t=this,i=void 0,s=function*(){this.placeElement.className=`place ${this.state&&e[this.state]||""}`,this.placeElement.setAttribute("data-id",this.id),yield this.parent.insertAdjacentElement("afterbegin",this.placeElement),this.placeElement.addEventListener("click",this.onClick)},new((l=void 0)||(l=Promise))((function(e,c){function a(e){try{o(s.next(e))}catch(e){c(e)}}function n(e){try{o(s.throw(e))}catch(e){c(e)}}function o(t){var i;t.done?e(t.value):(i=t.value,i instanceof l?i:new l((function(e){e(i)}))).then(a,n)}o((s=s.apply(t,i||[])).next())}));var t,i,l,s},this.onClick=()=>{switch(this.state){case"filled":alert("This place is occupied!");break;case"not-filled":this.state="selected",this.addSelectedPlace({price:this.price,id:this.id}),this.render();break;case"selected":this.state="not-filled",this.removeSelectedPlace(this.id),this.render()}},this.render=()=>{this.placeElement.className=`place ${this.state?this.state:""}`}}}const i=document.querySelector("#total-price");var l;const s=document.querySelector("#places-container"),c=document.querySelector("#amount-tickets"),a=document.querySelector("#price");let n;s&&c&&a&&(n=new class{constructor(e,l,s,c,a){this.rows=e,this.cols=l,this.prices=s,this.placesContainer=c,this.totalInfoNodes=a,this.totalPrice=0,this.totalCount=0,this.selectedPlaces=[],this.renderHall=()=>{for(let e=1;e<=this.rows;e++){const i=document.createElement("div");i.className="cinema-row";for(let l=0;l<this.cols;l++){let l=100;this.prices.forEach((t=>{t.row===e&&(l=t.price)})),new t(l,"not-filled",i,this.addSelectedPlace,this.removeSelectedPlace).init()}this.placesContainer.insertAdjacentElement("beforebegin",i)}},this.renderTotalInfo=()=>{this.totalInfoNodes.totalCount.textContent=this.totalCount.toString(),this.totalInfoNodes.totalPrice.textContent=this.totalPrice.toString(),i.value=this.totalPrice.toString()},this.reduceTotalValue=()=>{if(this.selectedPlaces.length>0){let e=0;this.selectedPlaces.forEach((t=>{e+=t.price})),this.totalPrice=e}else this.totalPrice=0;return this.totalCount=this.selectedPlaces.length,this.totalPrice},this.addSelectedPlace=e=>{this.selectedPlaces.push(e),this.reduceTotalValue(),this.renderTotalInfo()},this.removeSelectedPlace=e=>{this.selectedPlaces=this.selectedPlaces.filter((t=>t.id!==e)),this.reduceTotalValue(),this.renderTotalInfo()}}}(3,5,[{row:1,price:500},{row:2,price:400},{row:3,price:300}],s,{totalCount:c,totalPrice:a})),null==n||n.renderHall();const o=document.querySelector("#phone-number"),r=document.querySelector("#email");null===(l=document.querySelector("#buy"))||void 0===l||l.addEventListener("click",(()=>{o.value.length>5&&r.value.length>5&&r.value.includes("@")?alert("Вы забронировали билет"):alert("Вы ввели неправильные значения")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN6RUQsS0FBSzBELG1CQUNMMUQsS0FBS3dELGlCQUFpQixDQUU5QixHQ3RDZ0IsRUFBRyxFQW5CUixDQUNYLENBQ0lELElBQUssRUFDTDVELE1BQU8sS0FFWCxDQUNJNEQsSUFBSyxFQUNMNUQsTUFBTyxLQUVYLENBQ0k0RCxJQUFLLEVBQ0w1RCxNQUFPLE1BUW1CMkMsRUFBaUIsQ0FDM0NTLFdBQVlSLEVBQ1pPLFdBQVlOLEtBR3BCQyxTQUE0Q0EsRUFBS1EsYUFDakQsTUFBTWMsRUFBbUJ4RCxTQUFTNkIsY0FBYyxpQkFDMUM0QixFQUFhekQsU0FBUzZCLGNBQWMsVUFFcUIsUUFEOURDLEVBQUs5QixTQUNENkIsY0FBYyxlQUEyRCxJQUFQQyxHQUF5QkEsRUFBR3BCLGlCQUFpQixTQUFTLEtBQ3JIOEMsRUFBaUJ2QyxNQUFNbUMsT0FBUyxHQUNoQ0ssRUFBV3hDLE1BQU1tQyxPQUFTLEdBQzFCSyxFQUFXeEMsTUFBTXlDLFNBQVMsS0FDMUJoQyxNQUFNLDBCQUdOQSxNQUFNLGlDQUNWLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaW5lbWEvLi9zcmMvdHMvdHlwZXMudHMiLCJ3ZWJwYWNrOi8vY2luZW1hLy4vc3JjL3RzL1BsYWNlLnRzIiwid2VicGFjazovL2NpbmVtYS8uL3NyYy90cy91dGlscy50cyIsIndlYnBhY2s6Ly9jaW5lbWEvLi9zcmMvdHMvSGFsbC50cyIsIndlYnBhY2s6Ly9jaW5lbWEvLi9zcmMvdHMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNsYXNzQnlTdGF0ZSA9IHtcclxuICAgIFtcImZpbGxlZFwiIC8qIFN0YXRlLkZJTExFRCAqL106ICdmaWxsZWQnLFxyXG4gICAgW1wibm90LWZpbGxlZFwiIC8qIFN0YXRlLk5PVF9GSUxMRUQgKi9dOiAnbm90LWZpbGxlZCcsXHJcbiAgICBbXCJzZWxlY3RlZFwiIC8qIFN0YXRlLlNFTEVDVEVEICovXTogJ3NlbGVjdGVkJ1xyXG59O1xyXG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn07XHJcbmltcG9ydCB7IGNsYXNzQnlTdGF0ZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgeyBnZXRSYW5kb21JZCB9IGZyb20gJy4vdXRpbHMnO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGFjZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihwcmljZSwgc3RhdGUsIHBhcmVudCwgYWRkU2VsZWN0ZWRQbGFjZSwgcmVtb3ZlU2VsZWN0ZWRQbGFjZSkge1xyXG4gICAgICAgIHRoaXMucHJpY2UgPSBwcmljZTtcclxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICAgICAgdGhpcy5hZGRTZWxlY3RlZFBsYWNlID0gYWRkU2VsZWN0ZWRQbGFjZTtcclxuICAgICAgICB0aGlzLnJlbW92ZVNlbGVjdGVkUGxhY2UgPSByZW1vdmVTZWxlY3RlZFBsYWNlO1xyXG4gICAgICAgIHRoaXMuaWQgPSBnZXRSYW5kb21JZCgpO1xyXG4gICAgICAgIHRoaXMucGxhY2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5pbml0ID0gKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xyXG4gICAgICAgICAgICB0aGlzLnBsYWNlRWxlbWVudC5jbGFzc05hbWUgPSBgcGxhY2UgJHt0aGlzLnN0YXRlID8gY2xhc3NCeVN0YXRlW3RoaXMuc3RhdGVdIHx8ICcnIDogJyd9YDtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgdGhpcy5pZCk7XHJcbiAgICAgICAgICAgIHlpZWxkIHRoaXMucGFyZW50Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJiZWdpbicsIHRoaXMucGxhY2VFbGVtZW50KTtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCB0aGlzLm9uQ2xpY2spO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMub25DbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZmlsbGVkXCIgLyogU3RhdGUuRklMTEVEICovOlxyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdUaGlzIHBsYWNlIGlzIG9jY3VwaWVkIScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm5vdC1maWxsZWRcIiAvKiBTdGF0ZS5OT1RfRklMTEVEICovOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBcInNlbGVjdGVkXCIgLyogU3RhdGUuU0VMRUNURUQgKi87XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRTZWxlY3RlZFBsYWNlKHsgcHJpY2U6IHRoaXMucHJpY2UsIGlkOiB0aGlzLmlkIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXJ2ZWRQbGFjZXMucHVzaCh7IHByaWNlOiB0aGlzLnByaWNlLCBpZDogdGhpcy5pZCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZW5kZXJUb3RhbFRpY2tldHNJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2VsZWN0ZWRcIiAvKiBTdGF0ZS5TRUxFQ1RFRCAqLzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gXCJub3QtZmlsbGVkXCIgLyogU3RhdGUuTk9UX0ZJTExFRCAqLztcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXNlcnZlZFBsYWNlcyA9IHJlc2VydmVkUGxhY2VzLmZpbHRlcihcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdCh7IHByaWNlLCBpZCB9KSA9PiBpZCAhPT0gdGhpcy5pZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVuZGVyVG90YWxUaWNrZXRzSW5mbygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWRQbGFjZSh0aGlzLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnJlbmRlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wbGFjZUVsZW1lbnQuY2xhc3NOYW1lID0gYHBsYWNlICR7dGhpcy5zdGF0ZSA/IHRoaXMuc3RhdGUgOiAnJ31gO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGdldFJhbmRvbUlkID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIpO1xyXG59O1xyXG4iLCJpbXBvcnQgUGxhY2UgZnJvbSAnLi9QbGFjZSc7XHJcbmNvbnN0IHRvdGFsUHJpY2VJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG90YWwtcHJpY2VcIiAvKiBTZWxlY3RvcnMuVE9UQUxfUFJJQ0VfSU5QVVQgKi8pO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIYWxsIHtcclxuICAgIGNvbnN0cnVjdG9yKHJvd3MsIGNvbHMsIHByaWNlcywgcGxhY2VzQ29udGFpbmVyLCB0b3RhbEluZm9Ob2Rlcykge1xyXG4gICAgICAgIHRoaXMucm93cyA9IHJvd3M7XHJcbiAgICAgICAgdGhpcy5jb2xzID0gY29scztcclxuICAgICAgICB0aGlzLnByaWNlcyA9IHByaWNlcztcclxuICAgICAgICB0aGlzLnBsYWNlc0NvbnRhaW5lciA9IHBsYWNlc0NvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLnRvdGFsSW5mb05vZGVzID0gdG90YWxJbmZvTm9kZXM7XHJcbiAgICAgICAgdGhpcy50b3RhbFByaWNlID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsQ291bnQgPSAwO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQbGFjZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnJlbmRlckhhbGwgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHRoaXMucm93czsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3dFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICByb3dFbGVtZW50LmNsYXNzTmFtZSA9ICdjaW5lbWEtcm93JztcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5jb2xzOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJpY2UgPSAxMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmljZXMuZm9yRWFjaCgoSVByaWNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChJUHJpY2Uucm93ID09PSBpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2UgPSBJUHJpY2UucHJpY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IFBsYWNlKHByaWNlLCBcIm5vdC1maWxsZWRcIiAvKiBTdGF0ZS5OT1RfRklMTEVEICovLCByb3dFbGVtZW50LCB0aGlzLmFkZFNlbGVjdGVkUGxhY2UsIHRoaXMucmVtb3ZlU2VsZWN0ZWRQbGFjZSkuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGFjZXNDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdiZWZvcmViZWdpbicsIHJvd0VsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnJlbmRlclRvdGFsSW5mbyA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50b3RhbEluZm9Ob2Rlcy50b3RhbENvdW50LnRleHRDb250ZW50ID0gdGhpcy50b3RhbENvdW50LnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxJbmZvTm9kZXMudG90YWxQcmljZS50ZXh0Q29udGVudCA9IHRoaXMudG90YWxQcmljZS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB0b3RhbFByaWNlSW5wdXQudmFsdWUgPSB0aGlzLnRvdGFsUHJpY2UudG9TdHJpbmcoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucmVkdWNlVG90YWxWYWx1ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQbGFjZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHByaWNlID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQbGFjZXMuZm9yRWFjaCgocGxhY2UpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBwcmljZSArPSBwbGFjZS5wcmljZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbFByaWNlID0gcHJpY2U7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnRvdGFsUHJpY2UgPSB0aGlzLnNlbGVjdGVkUGxhY2VzLnJlZHVjZSgocHJldlZhbCwgY3VyclZhbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXHRwcmV2VmFsLnByaWNlICs9IGN1cnJWYWwucHJpY2U7XHJcbiAgICAgICAgICAgICAgICAvLyBcdHJldHVybiBwcmV2VmFsO1xyXG4gICAgICAgICAgICAgICAgLy8gfSkucHJpY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUHJpY2UgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxDb3VudCA9IHRoaXMuc2VsZWN0ZWRQbGFjZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b3RhbFByaWNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hZGRTZWxlY3RlZFBsYWNlID0gKHBsYWNlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQbGFjZXMucHVzaChwbGFjZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVkdWNlVG90YWxWYWx1ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclRvdGFsSW5mbygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZFBsYWNlID0gKGlkKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQbGFjZXMgPSB0aGlzLnNlbGVjdGVkUGxhY2VzLmZpbHRlcigocGxhY2UpID0+IHBsYWNlLmlkICE9PSBpZCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVkdWNlVG90YWxWYWx1ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclRvdGFsSW5mbygpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuIiwidmFyIF9hO1xyXG5pbXBvcnQgJy4uL2Nzcy9pbmRleC5jc3MnO1xyXG5pbXBvcnQgSGFsbCBmcm9tICcuL0hhbGwnO1xyXG5jb25zdCBwcmljZXMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgcm93OiAxLFxyXG4gICAgICAgIHByaWNlOiA1MDBcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgcm93OiAyLFxyXG4gICAgICAgIHByaWNlOiA0MDBcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgcm93OiAzLFxyXG4gICAgICAgIHByaWNlOiAzMDBcclxuICAgIH1cclxuXTtcclxuY29uc3QgcGxhY2VzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGFjZXMtY29udGFpbmVyXCIgLyogU2VsZWN0b3JzLlBMQUNFU19DT05UQUlORVIgKi8pO1xyXG5jb25zdCB0b3RhbENvdW50Tm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYW1vdW50LXRpY2tldHNcIiAvKiBTZWxlY3RvcnMuVE9UQUxfQ09VTlRfTk9ERSAqLyk7XHJcbmNvbnN0IHRvdGFsUHJpY2VOb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmljZVwiIC8qIFNlbGVjdG9ycy5UT1RBTF9QUklDRV9OT0RFICovKTtcclxubGV0IGhhbGw7XHJcbmlmIChwbGFjZXNDb250YWluZXIgJiYgdG90YWxDb3VudE5vZGUgJiYgdG90YWxQcmljZU5vZGUpIHtcclxuICAgIGhhbGwgPSBuZXcgSGFsbCgzLCA1LCBwcmljZXMsIHBsYWNlc0NvbnRhaW5lciwge1xyXG4gICAgICAgIHRvdGFsQ291bnQ6IHRvdGFsQ291bnROb2RlLFxyXG4gICAgICAgIHRvdGFsUHJpY2U6IHRvdGFsUHJpY2VOb2RlXHJcbiAgICB9KTtcclxufVxyXG5oYWxsID09PSBudWxsIHx8IGhhbGwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGhhbGwucmVuZGVySGFsbCgpO1xyXG5jb25zdCBwaG9uZU51bWJlcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwaG9uZS1udW1iZXJcIiAvKiBTZWxlY3RvcnMuTlVCTUVSX1BIT05FX0lOUFVUICovKTtcclxuY29uc3QgZW1haWxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZW1haWxcIiAvKiBTZWxlY3RvcnMuRU1BSUxfSU5QVVQgKi8pO1xyXG4oX2EgPSBkb2N1bWVudFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIjYnV5XCIgLyogU2VsZWN0b3JzLkJPT0tJTkdfQlVUVE9OICovKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKCkgPT4ge1xyXG4gICAgaWYgKHBob25lTnVtYmVySW5wdXQudmFsdWUubGVuZ3RoID4gNSAmJlxyXG4gICAgICAgIGVtYWlsSW5wdXQudmFsdWUubGVuZ3RoID4gNSAmJlxyXG4gICAgICAgIGVtYWlsSW5wdXQudmFsdWUuaW5jbHVkZXMoJ0AnKSkge1xyXG4gICAgICAgIGFsZXJ0KCfQktGLINC30LDQsdGA0L7QvdC40YDQvtCy0LDQu9C4INCx0LjQu9C10YInKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGFsZXJ0KCfQktGLINCy0LLQtdC70Lgg0L3QtdC/0YDQsNCy0LjQu9GM0L3Ri9C1INC30L3QsNGH0LXQvdC40Y8nKTtcclxuICAgIH1cclxufSk7XHJcbiJdLCJuYW1lcyI6WyJjbGFzc0J5U3RhdGUiLCJQbGFjZSIsImNvbnN0cnVjdG9yIiwicHJpY2UiLCJzdGF0ZSIsInBhcmVudCIsImFkZFNlbGVjdGVkUGxhY2UiLCJyZW1vdmVTZWxlY3RlZFBsYWNlIiwidGhpcyIsImlkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic2xpY2UiLCJwbGFjZUVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbml0IiwiX19hd2FpdGVyIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJnZW5lcmF0b3IiLCJjbGFzc05hbWUiLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwib25DbGljayIsIlAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInZhbHVlIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiYWxlcnQiLCJyZW5kZXIiLCJ0b3RhbFByaWNlSW5wdXQiLCJxdWVyeVNlbGVjdG9yIiwiX2EiLCJwbGFjZXNDb250YWluZXIiLCJ0b3RhbENvdW50Tm9kZSIsInRvdGFsUHJpY2VOb2RlIiwiaGFsbCIsInJvd3MiLCJjb2xzIiwicHJpY2VzIiwidG90YWxJbmZvTm9kZXMiLCJ0b3RhbFByaWNlIiwidG90YWxDb3VudCIsInNlbGVjdGVkUGxhY2VzIiwicmVuZGVySGFsbCIsImkiLCJyb3dFbGVtZW50IiwiaiIsImZvckVhY2giLCJJUHJpY2UiLCJyb3ciLCJyZW5kZXJUb3RhbEluZm8iLCJ0ZXh0Q29udGVudCIsInJlZHVjZVRvdGFsVmFsdWUiLCJsZW5ndGgiLCJwbGFjZSIsInB1c2giLCJmaWx0ZXIiLCJwaG9uZU51bWJlcklucHV0IiwiZW1haWxJbnB1dCIsImluY2x1ZGVzIl0sInNvdXJjZVJvb3QiOiIifQ==