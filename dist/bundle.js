(() => {
	'use strict';
	const e = {
		filled: 'filled',
		'not-filled': 'not-filled',
		selected: 'selected'
	};
	class t {
		constructor(t, i, s, l, c) {
			(this.price = t),
				(this.state = i),
				(this.parent = s),
				(this.addSelectedPlace = l),
				(this.removeSelectedPlace = c),
				(this.id = Math.random().toString(16).slice(2)),
				(this.placeElement = document.createElement('div')),
				(this.init = () => {
					return (
						(t = this),
						(i = void 0),
						(l = function* () {
							(this.placeElement.className = `place ${
								(this.state && e[this.state]) || ''
							}`),
								this.placeElement.setAttribute(
									'data-id',
									this.id
								),
								yield this.parent.insertAdjacentElement(
									'afterbegin',
									this.placeElement
								),
								this.placeElement.addEventListener(
									'click',
									this.onClick
								);
						}),
						new ((s = void 0) || (s = Promise))(function (e, c) {
							function a(e) {
								try {
									o(l.next(e));
								} catch (e) {
									c(e);
								}
							}
							function n(e) {
								try {
									o(l.throw(e));
								} catch (e) {
									c(e);
								}
							}
							function o(t) {
								var i;
								t.done
									? e(t.value)
									: ((i = t.value),
									  i instanceof s
											? i
											: new s(function (e) {
													e(i);
											  })).then(a, n);
							}
							o((l = l.apply(t, i || [])).next());
						})
					);
					var t, i, s, l;
				}),
				(this.onClick = () => {
					switch (this.state) {
						case 'filled':
							alert('This place is occupied!');
							break;
						case 'not-filled':
							(this.state = 'selected'),
								this.addSelectedPlace({
									price: this.price,
									id: this.id
								}),
								this.render();
							break;
						case 'selected':
							(this.state = 'not-filled'),
								this.removeSelectedPlace(this.id),
								this.render();
					}
				}),
				(this.render = () => {
					this.placeElement.className = `place ${
						this.state ? this.state : ''
					}`;
				});
		}
	}
	const i = document.querySelector('#places-container'),
		s = document.querySelector('#amount-tickets'),
		l = document.querySelector('#price');
	i &&
		s &&
		l &&
		new (class {
			constructor(e, i, s, l, c) {
				(this.rows = e),
					(this.cols = i),
					(this.prices = s),
					(this.placesContainer = l),
					(this.totalInfoNodes = c),
					(this.totalPrice = 0),
					(this.totalCount = 0),
					(this.selectedPlaces = []),
					(this.renderHall = () => {
						for (let e = 1; e <= this.rows; e++) {
							const i = document.createElement('div');
							i.className = 'cinema-row';
							for (let s = 0; s < this.cols; s++) {
								let s = 100;
								this.prices.forEach((t) => {
									t.row === e && (s = t.price);
								}),
									new t(
										s,
										'not-filled',
										i,
										this.addSelectedPlace,
										this.removeSelectedPlace
									).init();
							}
							this.placesContainer.insertAdjacentElement(
								'beforebegin',
								i
							);
						}
					}),
					(this.renderTotalInfo = () => {
						(this.totalInfoNodes.totalCount.textContent =
							this.totalCount.toString()),
							(this.totalInfoNodes.totalPrice.textContent =
								this.totalPrice.toString());
					}),
					(this.reduceTotalValue = () => {
						if (this.selectedPlaces.length > 0) {
							let e = 0;
							this.selectedPlaces.forEach((t) => {
								e += t.price;
							}),
								(this.totalPrice = e);
						} else this.totalPrice = 0;
						this.totalCount = this.selectedPlaces.length;
					}),
					(this.addSelectedPlace = (e) => {
						this.selectedPlaces.push(e),
							this.reduceTotalValue(),
							this.renderTotalInfo();
					}),
					(this.removeSelectedPlace = (e) => {
						(this.selectedPlaces = this.selectedPlaces.filter(
							(t) => t.id !== e
						)),
							this.reduceTotalValue(),
							this.renderTotalInfo();
					});
			}
		})(
			3,
			5,
			[
				{ row: 1, price: 500 },
				{ row: 2, price: 400 },
				{ row: 3, price: 300 }
			],
			i,
			{ totalCount: s, totalPrice: l }
		).renderHall();
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RVgsQ0FDSXlELElBQUssRUFDTHpELE1BQU8sTUFPWXdDLEVBQWlCLENBQUVTLFdBQVlQLEVBQWdCTSxXQUFZTCxJQUFrQlEsWSIsInNvdXJjZXMiOlsid2VicGFjazovL2NpbmVtYS8uL3NyYy90cy90eXBlcy50cyIsIndlYnBhY2s6Ly9jaW5lbWEvLi9zcmMvdHMvUGxhY2UudHMiLCJ3ZWJwYWNrOi8vY2luZW1hLy4vc3JjL3RzL3V0aWxzLnRzIiwid2VicGFjazovL2NpbmVtYS8uL3NyYy90cy9pbmRleC50cyIsIndlYnBhY2s6Ly9jaW5lbWEvLi9zcmMvdHMvSGFsbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY2xhc3NCeVN0YXRlID0ge1xyXG4gICAgW1wiZmlsbGVkXCIgLyogU3RhdGUuRklMTEVEICovXTogJ2ZpbGxlZCcsXHJcbiAgICBbXCJub3QtZmlsbGVkXCIgLyogU3RhdGUuTk9UX0ZJTExFRCAqL106ICdub3QtZmlsbGVkJyxcclxuICAgIFtcInNlbGVjdGVkXCIgLyogU3RhdGUuU0VMRUNURUQgKi9dOiAnc2VsZWN0ZWQnXHJcbn07XHJcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxuaW1wb3J0IHsgY2xhc3NCeVN0YXRlIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IGdldFJhbmRvbUlkIH0gZnJvbSAnLi91dGlscyc7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaWNlLCBzdGF0ZSwgcGFyZW50LCBhZGRTZWxlY3RlZFBsYWNlLCByZW1vdmVTZWxlY3RlZFBsYWNlKSB7XHJcbiAgICAgICAgdGhpcy5wcmljZSA9IHByaWNlO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB0aGlzLmFkZFNlbGVjdGVkUGxhY2UgPSBhZGRTZWxlY3RlZFBsYWNlO1xyXG4gICAgICAgIHRoaXMucmVtb3ZlU2VsZWN0ZWRQbGFjZSA9IHJlbW92ZVNlbGVjdGVkUGxhY2U7XHJcbiAgICAgICAgdGhpcy5pZCA9IGdldFJhbmRvbUlkKCk7XHJcbiAgICAgICAgdGhpcy5wbGFjZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmluaXQgPSAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGxhY2VFbGVtZW50LmNsYXNzTmFtZSA9IGBwbGFjZSAke3RoaXMuc3RhdGUgPyBjbGFzc0J5U3RhdGVbdGhpcy5zdGF0ZV0gfHwgJycgOiAnJ31gO1xyXG4gICAgICAgICAgICB0aGlzLnBsYWNlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCB0aGlzLmlkKTtcclxuICAgICAgICAgICAgeWllbGQgdGhpcy5wYXJlbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgdGhpcy5wbGFjZUVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYWNlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGBjbGlja2AsIHRoaXMub25DbGljayk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5vbkNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJmaWxsZWRcIiAvKiBTdGF0ZS5GSUxMRUQgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1RoaXMgcGxhY2UgaXMgb2NjdXBpZWQhJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibm90LWZpbGxlZFwiIC8qIFN0YXRlLk5PVF9GSUxMRUQgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFwic2VsZWN0ZWRcIiAvKiBTdGF0ZS5TRUxFQ1RFRCAqLztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFNlbGVjdGVkUGxhY2UoeyBwcmljZTogdGhpcy5wcmljZSwgaWQ6IHRoaXMuaWQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXNlcnZlZFBsYWNlcy5wdXNoKHsgcHJpY2U6IHRoaXMucHJpY2UsIGlkOiB0aGlzLmlkIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbmRlclRvdGFsVGlja2V0c0luZm8oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzZWxlY3RlZFwiIC8qIFN0YXRlLlNFTEVDVEVEICovOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBcIm5vdC1maWxsZWRcIiAvKiBTdGF0ZS5OT1RfRklMTEVEICovO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc2VydmVkUGxhY2VzID0gcmVzZXJ2ZWRQbGFjZXMuZmlsdGVyKFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx0KHsgcHJpY2UsIGlkIH0pID0+IGlkICE9PSB0aGlzLmlkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZW5kZXJUb3RhbFRpY2tldHNJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZFBsYWNlKHRoaXMuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucmVuZGVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsYWNlRWxlbWVudC5jbGFzc05hbWUgPSBgcGxhY2UgJHt0aGlzLnN0YXRlID8gdGhpcy5zdGF0ZSA6ICcnfWA7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgZ2V0UmFuZG9tSWQgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc2xpY2UoMik7XHJcbn07XHJcbiIsImltcG9ydCAnLi4vY3NzL2luZGV4LmNzcyc7XHJcbmltcG9ydCBIYWxsIGZyb20gJy4vSGFsbCc7XHJcbmNvbnN0IHByaWNlcyA9IFtcclxuICAgIHtcclxuICAgICAgICByb3c6IDEsXHJcbiAgICAgICAgcHJpY2U6IDUwMFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICByb3c6IDIsXHJcbiAgICAgICAgcHJpY2U6IDQwMFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICByb3c6IDMsXHJcbiAgICAgICAgcHJpY2U6IDMwMFxyXG4gICAgfVxyXG5dO1xyXG5jb25zdCBwbGFjZXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYWNlcy1jb250YWluZXJcIiAvKiBTZWxlY3RvcnMuUExBQ0VTX0NPTlRBSU5FUiAqLyk7XHJcbmNvbnN0IHRvdGFsQ291bnROb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhbW91bnQtdGlja2V0c1wiIC8qIFNlbGVjdG9ycy5UT1RBTF9DT1VOVF9OT0RFICovKTtcclxuY29uc3QgdG90YWxQcmljZU5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaWNlXCIgLyogU2VsZWN0b3JzLlRPVEFMX1BSSUNFX05PREUgKi8pO1xyXG5pZiAocGxhY2VzQ29udGFpbmVyICYmIHRvdGFsQ291bnROb2RlICYmIHRvdGFsUHJpY2VOb2RlKSB7XHJcbiAgICBuZXcgSGFsbCgzLCA1LCBwcmljZXMsIHBsYWNlc0NvbnRhaW5lciwgeyB0b3RhbENvdW50OiB0b3RhbENvdW50Tm9kZSwgdG90YWxQcmljZTogdG90YWxQcmljZU5vZGUgfSkucmVuZGVySGFsbCgpO1xyXG59XHJcbiIsImltcG9ydCBQbGFjZSBmcm9tICcuL1BsYWNlJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGFsbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihyb3dzLCBjb2xzLCBwcmljZXMsIHBsYWNlc0NvbnRhaW5lciwgdG90YWxJbmZvTm9kZXMpIHtcclxuICAgICAgICB0aGlzLnJvd3MgPSByb3dzO1xyXG4gICAgICAgIHRoaXMuY29scyA9IGNvbHM7XHJcbiAgICAgICAgdGhpcy5wcmljZXMgPSBwcmljZXM7XHJcbiAgICAgICAgdGhpcy5wbGFjZXNDb250YWluZXIgPSBwbGFjZXNDb250YWluZXI7XHJcbiAgICAgICAgdGhpcy50b3RhbEluZm9Ob2RlcyA9IHRvdGFsSW5mb05vZGVzO1xyXG4gICAgICAgIHRoaXMudG90YWxQcmljZSA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkUGxhY2VzID0gW107XHJcbiAgICAgICAgdGhpcy5yZW5kZXJIYWxsID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0aGlzLnJvd3M7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm93RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgcm93RWxlbWVudC5jbGFzc05hbWUgPSAnY2luZW1hLXJvdyc7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuY29sczsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByaWNlID0gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpY2VzLmZvckVhY2goKElQcmljZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoSVByaWNlLnJvdyA9PT0gaSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlID0gSVByaWNlLnByaWNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBQbGFjZShwcmljZSwgXCJub3QtZmlsbGVkXCIgLyogU3RhdGUuTk9UX0ZJTExFRCAqLywgcm93RWxlbWVudCwgdGhpcy5hZGRTZWxlY3RlZFBsYWNlLCB0aGlzLnJlbW92ZVNlbGVjdGVkUGxhY2UpLmluaXQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMucGxhY2VzQ29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudCgnYmVmb3JlYmVnaW4nLCByb3dFbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5yZW5kZXJUb3RhbEluZm8gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxJbmZvTm9kZXMudG90YWxDb3VudC50ZXh0Q29udGVudCA9IHRoaXMudG90YWxDb3VudC50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB0aGlzLnRvdGFsSW5mb05vZGVzLnRvdGFsUHJpY2UudGV4dENvbnRlbnQgPSB0aGlzLnRvdGFsUHJpY2UudG9TdHJpbmcoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucmVkdWNlVG90YWxWYWx1ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRQbGFjZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHByaWNlID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQbGFjZXMuZm9yRWFjaCgocGxhY2UpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBwcmljZSArPSBwbGFjZS5wcmljZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbFByaWNlID0gcHJpY2U7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnRvdGFsUHJpY2UgPSB0aGlzLnNlbGVjdGVkUGxhY2VzLnJlZHVjZSgocHJldlZhbCwgY3VyclZhbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXHRwcmV2VmFsLnByaWNlICs9IGN1cnJWYWwucHJpY2U7XHJcbiAgICAgICAgICAgICAgICAvLyBcdHJldHVybiBwcmV2VmFsO1xyXG4gICAgICAgICAgICAgICAgLy8gfSkucHJpY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUHJpY2UgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxDb3VudCA9IHRoaXMuc2VsZWN0ZWRQbGFjZXMubGVuZ3RoO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hZGRTZWxlY3RlZFBsYWNlID0gKHBsYWNlKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQbGFjZXMucHVzaChwbGFjZSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVkdWNlVG90YWxWYWx1ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclRvdGFsSW5mbygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5yZW1vdmVTZWxlY3RlZFBsYWNlID0gKGlkKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRQbGFjZXMgPSB0aGlzLnNlbGVjdGVkUGxhY2VzLmZpbHRlcigocGxhY2UpID0+IHBsYWNlLmlkICE9PSBpZCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVkdWNlVG90YWxWYWx1ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclRvdGFsSW5mbygpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNsYXNzQnlTdGF0ZSIsIlBsYWNlIiwiY29uc3RydWN0b3IiLCJwcmljZSIsInN0YXRlIiwicGFyZW50IiwiYWRkU2VsZWN0ZWRQbGFjZSIsInJlbW92ZVNlbGVjdGVkUGxhY2UiLCJ0aGlzIiwiaWQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzbGljZSIsInBsYWNlRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImluaXQiLCJfX2F3YWl0ZXIiLCJ0aGlzQXJnIiwiX2FyZ3VtZW50cyIsImdlbmVyYXRvciIsImNsYXNzTmFtZSIsInNldEF0dHJpYnV0ZSIsImluc2VydEFkamFjZW50RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbkNsaWNrIiwiUCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJhbGVydCIsInJlbmRlciIsInBsYWNlc0NvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJ0b3RhbENvdW50Tm9kZSIsInRvdGFsUHJpY2VOb2RlIiwicm93cyIsImNvbHMiLCJwcmljZXMiLCJ0b3RhbEluZm9Ob2RlcyIsInRvdGFsUHJpY2UiLCJ0b3RhbENvdW50Iiwic2VsZWN0ZWRQbGFjZXMiLCJyZW5kZXJIYWxsIiwiaSIsInJvd0VsZW1lbnQiLCJqIiwiZm9yRWFjaCIsIklQcmljZSIsInJvdyIsInJlbmRlclRvdGFsSW5mbyIsInRleHRDb250ZW50IiwicmVkdWNlVG90YWxWYWx1ZSIsImxlbmd0aCIsInBsYWNlIiwicHVzaCIsImZpbHRlciJdLCJzb3VyY2VSb290IjoiIn0=
